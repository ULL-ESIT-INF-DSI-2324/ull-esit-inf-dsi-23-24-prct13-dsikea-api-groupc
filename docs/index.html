<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>notes-rest-api</title><meta name="description" content="Documentation for notes-rest-api"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">notes-rest-api</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>notes-rest-api</h2></div><div class="tsd-panel tsd-typography"><a id="md:pr√°ctica-13---dsikea-api---group-c" class="tsd-anchor"></a><h1><a href="#md:pr√°ctica-13---dsikea-api---group-c">Pr√°ctica 13 - DSIKEA API - GROUP C</a></h1><a id="md:üôÇ-integrantes" class="tsd-anchor"></a><h2><a href="#md:üôÇ-integrantes">[üôÇ] Integrantes:</a></h2><ul>
<li>Mariajose Zuloeta Brito</li>
<li>Samuel Lorenzo S√°nchez</li>
<li>Adri√°n Lima Garc√≠a</li>
</ul>
<p align="center">
  <a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupc?branch=main">
    <img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupc/badge.svg?branch=main" alt="Coverage Status">
  </a>
  <a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupc/actions/workflows/node.js.yml">
    <img src="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupc/actions/workflows/node.js.yml/badge.svg" alt="Tests">
  </a>
  <a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupc">
    <img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupc&metric=alert_status" alt="Quality Gate Status">
  </a>
</p>

<hr>
<a id="md:üí¨-introducci√≥n" class="tsd-anchor"></a><h2><a href="#md:üí¨-introducci√≥n">[üí¨] Introducci√≥n</a></h2><p>Para √©sta pr√°ctica hemos tenido que desarrollar nuestra propia API Rest haciendo uso de Express y MongoDB. La API que hemos desarrollado es una API para una tienda de muebles llamada DSIkea. En ella se pueden gestionar clientes, proveedores, muebles y transacciones mediante operaciones CRUD gracias a las rutas que hemos implementado.</p>
<p>Adem√°s, hemos hecho uso de herramientas como <strong>MongoDB Atlas</strong> para almacenar la base de datos en la nube y <strong>Render</strong> para desplegar la propia API tambi√©n en la nube.</p>
<p>L√≥gicamente todo √©ste proceso ha sido llevado mediante pruebas unitarias, cubrimiento de c√≥digo (Coveralls), an√°lisis de calidad (SonarCloud) y despliegue continuo (GitHub Actions).</p>
<a id="md:‚öôÔ∏è-desarrollo" class="tsd-anchor"></a><h2><a href="#md:‚öôÔ∏è-desarrollo">[‚öôÔ∏è] Desarrollo</a></h2><p>En √©ste apartado de desarrollo, se ha decidido dividir la explicaci√≥n de las decisiones y el desarrollo en diferentes secciones. Primero, se explicar√°n de forma breve y concisa las diferentes herramientas utilizadas para √©sta pr√°ctica y sus configuraciones pertinentes, adem√°s del por qu√© de la toma de dichas configuraciones. A continuaci√≥n, se explicar√°n los modelos de la API y las rutas implementadas, as√≠ como las decisiones tomadas para su implementaci√≥n.</p>
<a id="md:üõ†Ô∏è-herramientas-utilizadas" class="tsd-anchor"></a><h3><a href="#md:üõ†Ô∏è-herramientas-utilizadas">[üõ†Ô∏è] Herramientas utilizadas</a></h3><a id="md:‚úâÔ∏è-express" class="tsd-anchor"></a><h4><a href="#md:‚úâÔ∏è-express">[‚úâÔ∏è] Express</a></h4><p>Express es un framework de Node.js que permite crear aplicaciones web de forma sencilla. Nuestra API Rest ha sido desarrollada con Express.</p>
<p>Como se puede apreciar en la implementaci√≥n de la API, hemos utilizado Express para la creaci√≥n de la aplicaci√≥n, la definici√≥n de las rutas y la gesti√≥n de las peticiones HTTP. M√°s adelante, en el apartado de rutas, se explicar√° m√°s en detalle c√≥mo se han implementado las mismas.</p>
<p>A grandes rasgos, las configuraciones que hemos tomado para Express han sido las siguientes:</p>
<ul>
<li><strong>Puerto de escucha</strong>: Hemos definido el puerto de escucha de la aplicaci√≥n en la variable de entorno <code>PORT</code>. En caso de no existir, se ha definido el puerto 3000 como puerto por defecto.</li>
<li>Uso de <code>express.json()</code>: Hemos utilizado <code>express.json()</code> para poder parsear el cuerpo de las peticiones HTTP en formato JSON.</li>
<li>Uso de las rutas: Hemos definido las rutas de la API en diferentes archivos para mantener una estructura m√°s limpia y ordenada, y dentro del <code>index.js</code> hemos importado dichas rutas y las hemos montado en la aplicaci√≥n.</li>
<li>Uso de <code>express.Router()</code>: Hemos utilizado el m√©todo <code>express.Router()</code> para definir las rutas de la API de forma modular y reutilizable.</li>
</ul>
<p>De nuevo, m√°s adelante se explicar√° con m√°s detalle c√≥mo se han implementado las rutas.</p>
<a id="md:üìñ-mongodb--mongoose" class="tsd-anchor"></a><h4><a href="#md:üìñ-mongodb--mongoose">[üìñ] MongoDB / Mongoose</a></h4><p>MongoDB es una base de datos no relacional que hemos utilizado para almacenar los datos de la API. Para interactuar con la base de datos, hemos utilizado Mongoose, que nos permite definir modelos y esquemas para los datos y poder interactuar con la base de datos de una forma m√°s sencilla y estructurada.</p>
<p>En cuanto a las configuraciones que hemos tomado para MongoDB y Mongoose, han sido las siguientes:</p>
<ul>
<li><strong>Conexi√≥n a la base de datos</strong>: Hemos definido la URI de conexi√≥n a la base de datos en la variable de entorno <code>MONGODB_URI</code>.</li>
<li><strong>Definici√≥n de modelos y esquemas</strong>: Hemos definido los modelos y esquemas de la base de datos en diferentes archivos para mantener una estructura m√°s limpia y ordenada, y dentro del <code>index.js</code> hemos importado dichos modelos y esquemas y los hemos utilizado para interactuar con la base de datos.</li>
</ul>
<p>En un principio trabajamos de forma local con una base de datos MongoDB, pero finalmente realizamos la migraci√≥n a MongoDB Atlas para poder desplegar la API en Render. Para la creaci√≥n de la base de datos en local seguimos la <a href="https://ull-esit-inf-dsi-2324.github.io/nodejs-theory/nodejs-mongodb.html">documentaci√≥n para la instalaci√≥n de MongoDB en Ubuntu</a> con pasos ya realizados en pr√°cticas anteriores.</p>
<a id="md:üåç-mongodb-atlas" class="tsd-anchor"></a><h4><a href="#md:üåç-mongodb-atlas">[üåç] MongoDB Atlas</a></h4><p>MongoDB Atlas es un servicio de base de datos en la nube que hemos utilizado para almacenar la base de datos de la API. B√°sicamente hemos utilizado MongoDB Atlas para poder tener la base de datos en la nube y poder acceder a ella desde cualquier lugar.</p>
<p>Si bien en una primera instancia, en las primeras fases del proyecto, utilizamos una base de datos MongoDB local, finalmente realizamos la migraci√≥n a MongoDB Atlas para poder desplegar la API en Render.</p>
<p>Para la configuraci√≥n de MongoDB Atlas, hemos seguido los siguientes pasos definidos en la <a href="https://ull-esit-inf-dsi-2324.github.io/nodejs-theory/nodejs-deployment.html">documentaci√≥n sobre el despliegue con MongoDB Atlas y Render</a>:</p>
<ol>
<li>Acceder al sitio web de MongoDB Atlas y registrarse.</li>
<li>Crear una organizaci√≥n y un proyecto en MongoDB Atlas: &quot;DSI-GRUPOC&quot; en nuestro caso.</li>
<li>Crear un cl√∫ster en MongoDB Atlas haciendo clic en &quot;Create&quot; en la secci√≥n de &quot;Create a deployment&quot;, eligiendo el tipo de cl√∫ster M0.</li>
<li>Dar un nombre al cl√∫ster y seleccionar un proveedor de servicios en la nube y una regi√≥n. En nuestro caso &quot;IkeaRestAPICluster&quot;.</li>
<li>Crear el cl√∫ster pulsando en &quot;Create Deployment&quot;.</li>
<li>Configurar la autenticaci√≥n del servidor de base de datos seleccionando &quot;Database Access&quot; en el panel izquierdo, creando un nuevo usuario con nombre de usuario y contrase√±a espec√≠ficos, y asign√°ndole el rol &quot;Read and write to any database&quot;. Nosotros creamos al usuario <code>dsiikea</code>.</li>
<li>Configurar el acceso de red seleccionando &quot;Network Access&quot; en el panel izquierdo, borrando las IP existentes y a√±adiendo la IP <code>0.0.0.0/</code>0 para permitir el acceso desde cualquier IP.</li>
<li>Acceder al cl√∫ster seleccionando &quot;Database&quot; en el panel izquierdo y haciendo clic en &quot;Connect&quot;.</li>
<li>Seleccionar un m√©todo de conexi√≥n. Nosotros usamos la extensi√≥n de MongoDB de VSCode.</li>
<li>Copiar la URL de conexi√≥n al cluster generada, sustituyendo <code>&lt;password&gt;</code> por la contrase√±a del usuario de la base de datos creado y especificando la base de datos a la que nos conectaremos.</li>
<li>Abrir el cliente de MongoDB, pegar la URL de conexi√≥n y hacer clic en &quot;Connect&quot;. √âsta URL ser√° la que utilicemos posteriormente en nuestro c√≥digo para establecer la conexi√≥n con la Base de Datos.</li>
</ol>
<a id="md:üìÑ-render" class="tsd-anchor"></a><h4><a href="#md:üìÑ-render">[üìÑ] Render</a></h4><p>Hemos utilizado la herramienta Render para poder desplegar nuestra API Rest en internet. √âsta herramienta nos ofrece una forma de alojar nuestra aplicaci√≥n para poder acceder a ella en la direcci√≥n web que se nos asigne.</p>
<p>Para poder configurarla, se ha hecho uso de la gu√≠a proporcionada en los apuntes de la asignatura, que a grandes rasgos se basa en los siguientes pasos:</p>
<ol>
<li>Modificar el archivo <code>package.json</code> de forma similar a la gu√≠a.</li>
<li>Registrarse en Render.</li>
<li>En la pantalla principal de Render, hacer clic en &quot;New Web Service&quot; y seleccionar &quot;Build and deploy from a Git repository&quot;.</li>
<li>Seleccionar el repositorio que contiene el c√≥digo fuente de la aplicaci√≥n.</li>
<li>Configurar las opciones en el formulario.</li>
<li>Hacer clic en &quot;Create Web Service&quot;.</li>
<li>Esperar y verificar en el log la conexi√≥n exitosa a la base de datos MongoDB Atlas.</li>
</ol>
<hr>
<a id="md:üß¨-modelos" class="tsd-anchor"></a><h3><a href="#md:üß¨-modelos">[üß¨] Modelos</a></h3><p>Para la implementaci√≥n de la API, hemos definido una serie de modelos que representan los datos que se almacenan en la base de datos. Dichos modelos los hemos implementado cada uno a partir de una interfaz que extiende de <code>Document</code> de Mongoose. A trav√©s de √©stas interfaces, hemos creado esquemas de MongoDB que definen la estructura de los datos y las operaciones que se pueden realizar sobre ellos.</p>
<p>√âsto nos ha permitido tener una estructura m√°s limpia y ordenada, y poder interactuar con la base de datos de una forma m√°s sencilla y estructurada, permiti√©ndonos realizar operaciones CRUD sobre los datos de la base de datos y tener un control m√°s preciso sobre los mismos.</p>
<a id="md:üë©-cliente" class="tsd-anchor"></a><h4><a href="#md:üë©-cliente">[üë©] Cliente</a></h4><p>Definimos un cliente de la siguiente manera:</p>
<ul>
<li><code>name</code>: Nombre del cliente. Valor de tipo <code>String</code> y requerido.</li>
<li><code>nif</code>: NIF del cliente. Valor de tipo <code>String</code> y requerido.</li>
<li><code>email</code>: Correo electr√≥nico del cliente. Valor de tipo <code>String</code> y opcional.</li>
<li><code>mobilePhone</code>: Tel√©fono m√≥vil del cliente. Valor de tipo <code>Number</code> y opcional.</li>
<li><code>furniture</code>: Se trata de un array de pares que contiene la referencia al mueble de la base de datos y la cantidad de las que dispone el cliente. Valor de tipo <code>Array</code> y requerido.</li>
</ul>
<a id="md:üì¶-proveedor" class="tsd-anchor"></a><h4><a href="#md:üì¶-proveedor">[üì¶] Proveedor</a></h4><p>Definimos un proveedor de la siguiente manera:</p>
<ul>
<li><code>name</code>: Nombre del proveedor. Valor de tipo <code>String</code> y requerido.</li>
<li><code>cif</code>: CIF del proveedor. Valor de tipo <code>String</code> y requerido.</li>
<li><code>email</code>: Correo electr√≥nico del proveedor. Valor de tipo <code>String</code> y opcional.</li>
<li><code>mobilePhone</code>: Tel√©fono m√≥vil del proveedor. Valor de tipo <code>Number</code> y opcional.</li>
<li><code>furniture</code>: Se trata de un array de pares que contiene la referencia al mueble de la base de datos y la cantidad de la que dispone el proveedor. Valor de tipo <code>Array</code> y requerido.</li>
</ul>
<a id="md:ü™ë-mueble" class="tsd-anchor"></a><h4><a href="#md:ü™ë-mueble">[ü™ë] Mueble</a></h4><p>Definimos un mueble de la siguiente manera:</p>
<ul>
<li><code>name</code>: Nombre del mueble. Valor de tipo <code>String</code> y requerido.</li>
<li><code>description</code>: Descripci√≥n del mueble. Valor de tipo <code>String</code> y requerido.</li>
<li><code>color</code>: Color del mueble. Valor de tipo <code>String</code> y requerido. Se ha definido un enum con los colores posibles.</li>
<li><code>price</code>: Precio del mueble. Valor de tipo <code>Number</code> y requerido. √âste valor es validado para que sea positivo.</li>
<li><code>stock</code>: Stock del mueble. Valor de tipo <code>Number</code> y requerido. Por defecto, el stock es 1.</li>
</ul>
<a id="md:üí≥-transacciones" class="tsd-anchor"></a><h4><a href="#md:üí≥-transacciones">[üí≥] Transacciones</a></h4><p>Definimos una transacci√≥n de la siguiente manera:</p>
<ul>
<li><code>participantId</code>: ID del participante de la transacci√≥n. Valor que puede ser de tipos <code>ProviderDocumentInterface</code> o  <code>CustomerDocumentInterface</code> (dependiendo de si es una transacci√≥n de cliente o de usuario) y requerido.</li>
<li><code>transactionType</code>: Tipo de transacci√≥n. Valor de tipo <code>String</code> y requerido. Se ha definido un enum con los tipos de transacci√≥n posibles.<ul>
<li><code>&#39;Sale To Customer&#39;</code>: Venta a un cliente.</li>
<li><code>&#39;Purchase To Provider&#39;</code>: Compra a un proveedor.</li>
<li><code>&#39;Return To Provider&#39;</code>: Devoluci√≥n a un proveedor.</li>
<li><code>&#39;Return To Customer&#39;</code>: Devoluci√≥n a un cliente.</li>
</ul>
</li>
<li><code>dateTime</code>: Fecha y hora de la transacci√≥n. Valor de tipo <code>Date</code> y requerido.</li>
<li><code>totalAmount</code>: Importe total de la transacci√≥n. Valor de tipo <code>Number</code> y requerido.</li>
<li><code>details</code>: Detalles de la transacci√≥n. Valor de tipo <code>String</code> y opcional.</li>
<li><code>furniture</code>: Se trata de un array de pares que contiene la referencia al mueble de la base de datos y la cantidad de la que se ha realizado la transacci√≥n. Valor de tipo <code>Array</code> y requerido.</li>
</ul>
<a id="md:üóÉÔ∏è-rutas" class="tsd-anchor"></a><h3><a href="#md:üóÉÔ∏è-rutas">[üóÉÔ∏è] Rutas</a></h3><p>Hemos definido una serie de rutas que permiten realizar operaciones CRUD sobre los datos de la base de datos. Dichas rutas las hemos implementado en diferentes archivos para mantener una estructura m√°s limpia y ordenada, y dentro del <code>index.js</code> hemos importado dichas rutas y las hemos montado en la aplicaci√≥n. A continuaci√≥n, se explicar√°n las rutas implementadas y las decisiones tomadas para su implementaci√≥n.</p>
<a id="md:üë©-clientes" class="tsd-anchor"></a><h4><a href="#md:üë©-clientes">[üë©] Clientes</a></h4><ul>
<li><p><strong>GET /customers</strong>: Busca en la base de datos el cliente especificado en el query de la petici√≥n en funci√≥n de si se ha pasado su id √∫nico de la base de datos o su nif. Si no se ha pasado ninguno, devuelve todos los clientes.
Para ello en una primera instancia hemos extraido el nif y hemos creado un filtro con el mismo. Posteriormente hemos utilizado el m√©todo <code>find</code> de Mongoose para buscar en la base de datos el cliente especificado en el query de la petici√≥n.
Si se ha encontrado el cliente, se devuelve un c√≥digo de estado 200 y el cliente encontrado. Si no se ha encontrado, se devuelve un c√≥digo de estado 404 y un mensaje de error.</p>
</li>
<li><p><strong>GET /customers/:id</strong>: Busca en la base de datos el cliente con el ID especificado en la URL de la petici√≥n. Para ello hemos utilizado el m√©todo <code>findById</code> de Mongoose para buscar en la base de datos el cliente con el ID √∫nico y, si se ha encontrado, se devuelve un c√≥digo de estado 200 y el cliente encontrado. Si no se ha encontrado, se devuelve un c√≥digo de estado 404 y un mensaje de error.</p>
</li>
<li><p><strong>POST /customers</strong>: Crea un nuevo cliente en la base de datos. Para ello hemos extraido los datos del cliente del cuerpo de la petici√≥n y hemos usado <code>new Customer</code> para crear un nuevo objeto cliente. Posteriormente hemos utilizado el m√©todo <code>save</code> de Mongoose para guardar el cliente en la base de datos y, si se ha guardado correctamente, se devuelve un c√≥digo de estado 201 y el cliente creado. Si no se ha guardado correctamente, se devuelve un c√≥digo de estado 404 y un mensaje de error.</p>
</li>
<li><p><strong>PATCH /customers</strong>: Actualiza los detalles de un cliente en la base de datos basado en su NIF. Primero se verifica si se ha proporcionado un NIF en el query de la petici√≥n. Si no se proporciona, se devuelve un c√≥digo de estado 400 junto con un mensaje de error. Luego se definen los campos permitidos para actualizaci√≥n y se verifica si las actualizaciones solicitadas est√°n dentro de los campos permitidos. Si no lo est√°n, se devuelve un c√≥digo de estado 400 junto con un mensaje de error.
Despu√©s, se utiliza el m√©todo <code>findOneAndUpdate</code> de Mongoose para buscar y actualizar el cliente en la base de datos. Se proporciona el filtro del NIF y los datos de actualizaci√≥n del cuerpo de la petici√≥n. Adem√°s, se establece la opci√≥n <code>new</code> como true para devolver el documento actualizado y <code>runValidators</code> como true para ejecutar las validaciones definidas en el esquema del modelo.
Si se actualiza correctamente el cliente, se devuelve un c√≥digo de estado 200 junto con el cliente actualizado. En caso contrario, si el cliente no se encuentra, se devuelve un c√≥digo de estado 404 y un mensaje de error. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>PATCH /customers/:id</strong>: Actualiza los detalles de un cliente en la base de datos basado en su ID. Se define un conjunto de campos permitidos para la actualizaci√≥n y se verifica si las actualizaciones solicitadas est√°n dentro de los campos permitidos. Si no lo est√°n, se devuelve un c√≥digo de estado 400 junto con un mensaje de error.
Luego, se utiliza el m√©todo <code>findByIdAndUpdate</code> de Mongoose para buscar y actualizar el cliente en la base de datos basado en su ID. Se proporciona el ID del cliente y los datos de actualizaci√≥n del cuerpo de la petici√≥n. Adem√°s, se establece la opci√≥n <code>new</code> como true para devolver el documento actualizado y <code>runValidators</code> como true para ejecutar las validaciones definidas en el esquema del modelo.
Si se actualiza correctamente el cliente, se devuelve un c√≥digo de estado 200 junto con el cliente actualizado. En caso contrario, si el cliente no se encuentra, se devuelve un c√≥digo de estado 404 y un mensaje de error. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>DELETE /customers</strong>: Elimina un cliente de la base de datos basado en su NIF. Se determina un filtro basado en el NIF proporcionado en el query de la petici√≥n, si se proporciona. Luego, se utiliza el m√©todo <code>findOneAndDelete</code> de Mongoose para buscar y eliminar el cliente de la base de datos basado en el filtro. Si el cliente se encuentra y se elimina correctamente, se devuelve un c√≥digo de estado 200 junto con el cliente eliminado. En caso contrario, si el cliente no se encuentra, se devuelve un c√≥digo de estado 404 y un mensaje de error indicando que el cliente no fue encontrado. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>DELETE /customers/:id</strong>: Elimina un cliente de la base de datos basado en su ID. Se utiliza el m√©todo <code>findByIdAndDelete</code> de Mongoose para buscar y eliminar el cliente de la base de datos basado en su ID. Si el cliente se encuentra y se elimina correctamente, se devuelve un c√≥digo de estado 200 junto con el cliente eliminado. En caso contrario, si el cliente no se encuentra, se devuelve un c√≥digo de estado 404 y un mensaje de error indicando que el cliente no fue encontrado. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
</ul>
<a id="md:üì¶-proveedores" class="tsd-anchor"></a><h4><a href="#md:üì¶-proveedores">[üì¶] Proveedores</a></h4><ul>
<li><p><strong>GET /providers</strong>: Obtiene todos los proveedores o un proveedor espec√≠fico seg√∫n su CIF o ID. Se establece un filtro inicial como un objeto vac√≠o. Luego, se eval√∫an las diferentes combinaciones de par√°metros de consulta (<code>cif</code>, <code>id</code>) para construir el filtro adecuado. Se utiliza el m√©todo <code>find</code> de Mongoose para buscar en la base de datos los proveedores que coincidan con el filtro especificado. Si se encuentran proveedores y la lista no est√° vac√≠a, se devuelve un c√≥digo de estado 200 junto con los proveedores encontrados. En caso contrario, si no se encuentran proveedores que coincidan con el filtro, se devuelve un c√≥digo de estado 404. Si no se proporciona un CIF o un ID en la consulta, se devuelve un c√≥digo de estado 400 junto con un mensaje indicando que se debe proporcionar un CIF o un ID. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>GET /providers/:id</strong>: Obtiene un proveedor espec√≠fico de la base de datos basado en su ID. Se utiliza el m√©todo <code>findById</code> de Mongoose para buscar el proveedor por su ID √∫nico en la base de datos. Si se encuentra el proveedor, se devuelve un c√≥digo de estado 200 junto con el proveedor encontrado. En caso contrario, si el proveedor no se encuentra, se devuelve un c√≥digo de estado 404. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>POST /providers</strong>: Crea un nuevo proveedor en la base de datos. Se crea un nuevo objeto proveedor utilizando los datos proporcionados en el cuerpo de la petici√≥n. Luego, se utiliza el m√©todo <code>save</code> de Mongoose para guardar el proveedor en la base de datos. Si la operaci√≥n se completa correctamente, se devuelve un c√≥digo de estado 201 junto con el proveedor creado. En caso de que ocurra alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error indicando la causa del problema.</p>
</li>
<li><p><strong>PATCH /providers</strong>: Actualiza los detalles de un proveedor en la base de datos basado en su CIF. Se verifica si se proporciona el CIF del proveedor en el query de la petici√≥n. Si no se proporciona, se devuelve un c√≥digo de estado 400 junto con un mensaje indicando que el CIF es requerido.
Luego, se verifica si las actualizaciones solicitadas est√°n dentro de los campos permitidos. Si no lo est√°n, se devuelve un c√≥digo de estado 400 y un mensaje indicando que las actualizaciones no est√°n permitidas.
Se utiliza el m√©todo <code>findOneAndUpdate</code> de Mongoose para buscar y actualizar el proveedor en la base de datos basado en su CIF. Se proporciona el CIF del proveedor y los datos de actualizaci√≥n del cuerpo de la petici√≥n. Adem√°s, se establece la opci√≥n <code>new</code> como true para devolver el documento actualizado y <code>runValidators</code> como true para ejecutar las validaciones definidas en el esquema del modelo.
Si se actualiza correctamente el proveedor, se devuelve un c√≥digo de estado 200 junto con el proveedor actualizado. En caso contrario, si el proveedor no se encuentra, se devuelve un c√≥digo de estado 404. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>PATCH /providers/:id</strong>: Actualiza los detalles de un proveedor en la base de datos basado en su ID. Se verifica si las actualizaciones solicitadas est√°n dentro de los campos permitidos. Si no lo est√°n, se devuelve un c√≥digo de estado 400 y un mensaje indicando que las actualizaciones no est√°n permitidas.
Se utiliza el m√©todo <code>findByIdAndUpdate</code> de Mongoose para buscar y actualizar el proveedor en la base de datos basado en su ID proporcionado en la URL de la petici√≥n. Se proporciona el ID del proveedor y los datos de actualizaci√≥n del cuerpo de la petici√≥n. Adem√°s, se establece la opci√≥n <code>new</code> como true para devolver el documento actualizado y <code>runValidators</code> como true para ejecutar las validaciones definidas en el esquema del modelo.
Si se actualiza correctamente el proveedor, se devuelve un c√≥digo de estado 200 junto con el proveedor actualizado. En caso contrario, si el proveedor no se encuentra, se devuelve un c√≥digo de estado 404. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>DELETE /providers</strong>: Elimina un proveedor de la base de datos basado en su CIF. Se verifica si se proporciona el CIF del proveedor en el query de la petici√≥n. Si no se proporciona, se devuelve un c√≥digo de estado 400 junto con un mensaje indicando que el CIF es requerido.
Se utiliza el m√©todo <code>findOne</code> de Mongoose para buscar el proveedor en la base de datos basado en su CIF. Si se encuentra el proveedor, se devuelve un c√≥digo de estado 200 junto con el proveedor encontrado. En caso contrario, si el proveedor no se encuentra, se devuelve un c√≥digo de estado 404 y un mensaje indicando que el proveedor no fue encontrado. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>DELETE /providers/:id</strong>: Elimina un proveedor de la base de datos basado en su ID. Se utiliza el m√©todo <code>findByIdAndDelete</code> de Mongoose para buscar y eliminar el proveedor de la base de datos basado en su ID proporcionado en la URL de la petici√≥n. Si se encuentra el proveedor y se elimina correctamente, se devuelve un c√≥digo de estado 200 junto con el proveedor eliminado. En caso contrario, si el proveedor no se encuentra, se devuelve un c√≥digo de estado 404 y un mensaje indicando que el proveedor no fue encontrado. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
</ul>
<a id="md:ü™ë-muebles" class="tsd-anchor"></a><h4><a href="#md:ü™ë-muebles">[ü™ë] Muebles</a></h4><ul>
<li><p><strong>GET /furnitures</strong>: Obtiene todos los muebles o un mueble espec√≠fico seg√∫n su nombre, descripci√≥n o color. Se establece un filtro inicial como un objeto vac√≠o. Luego, se eval√∫an las diferentes combinaciones de par√°metros de consulta (<code>name</code>, <code>description</code>, <code>color</code>) para construir el filtro adecuado. Se utiliza el m√©todo find de Mongoose para buscar en la base de datos los muebles que coincidan con el filtro especificado. Si se encuentran muebles y la lista no est√° vac√≠a, se devuelve un c√≥digo de estado 200 junto con los muebles encontrados. En caso contrario, si no se encuentran muebles que coincidan con el filtro, se devuelve un c√≥digo de estado 404 y un mensaje indicando que el mueble no se encontr√≥. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>GET /furnitures/:id</strong>: Obtiene un mueble espec√≠fico de la base de datos basado en su ID. Se utiliza el m√©todo <code>findById</code> de Mongoose para buscar el mueble en la base de datos basado en su ID proporcionado en la URL de la petici√≥n. Si se encuentra el mueble, se devuelve un c√≥digo de estado 200 junto con el mueble encontrado. En caso contrario, si el mueble no se encuentra, se devuelve un c√≥digo de estado 404 y un mensaje indicando que el mueble no fue encontrado. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>POST /furnitures</strong>: Crea un nuevo mueble en la base de datos. Se crea un nuevo objeto mueble utilizando los datos proporcionados en el cuerpo de la petici√≥n. Luego, se utiliza el m√©todo save de Mongoose para guardar el mueble en la base de datos. Si la operaci√≥n se completa correctamente, se devuelve un c√≥digo de estado 201 junto con el mueble creado. En caso de que ocurra alg√∫n error de validaci√≥n, se devuelve un c√≥digo de estado 400 y un mensaje de error detallando la causa del problema.</p>
</li>
<li><p><strong>PATCH /furnitures</strong>: Actualiza los detalles de un mueble en la base de datos basado en su nombre. Se verifica si se proporciona el nombre del mueble en el query de la petici√≥n. Si no se proporciona, se devuelve un c√≥digo de estado 400 junto con un mensaje indicando que el nombre es requerido. Luego, se verifica si las actualizaciones solicitadas est√°n dentro de los campos permitidos. Si no lo est√°n, se devuelve un c√≥digo de estado 400 y un mensaje indicando que las actualizaciones son inv√°lidas. Se utiliza el m√©todo <code>findOne</code> de Mongoose para buscar el mueble basado en el nombre proporcionado en el query de la petici√≥n. Si se encuentra el mueble, se actualizan los campos especificados en el cuerpo de la petici√≥n y se guarda el mueble actualizado en la base de datos. Se devuelve el mueble actualizado. Si el mueble no se encuentra, se devuelve un c√≥digo de estado 404 y un mensaje indicando que el mueble no fue encontrado. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 400 y un mensaje de error indicando la causa del problema.</p>
</li>
<li><p><strong>PATCH /furnitures/:id</strong>: Actualiza los detalles de un mueble en la base de datos basado en su ID.
Estrategia: Se verifica si las actualizaciones solicitadas est√°n dentro de los campos permitidos. Si no lo est√°n, se devuelve un c√≥digo de estado 400 y un mensaje indicando que las actualizaciones son inv√°lidas.
Se utiliza el m√©todo <code>findByIdAndUpdate</code> de Mongoose para buscar y actualizar el mueble en la base de datos basado en su ID. Se proporciona el ID del mueble y los datos de actualizaci√≥n del cuerpo de la petici√≥n. Adem√°s, se establece la opci√≥n <code>new</code> como true para devolver el documento actualizado y <code>runValidators</code> como true para ejecutar las validaciones definidas en el esquema del modelo.
Si se actualiza correctamente el mueble, se devuelve un c√≥digo de estado 200 junto con el mueble actualizado. En caso contrario, si el mueble no se encuentra, se devuelve un c√≥digo de estado 404 y un mensaje indicando que el mueble no fue encontrado. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 400 y un mensaje de error indicando la causa del problema.</p>
</li>
<li><p><strong>DELETE /furnitures</strong>: Elimina un mueble de la base de datos basado en su nombre. Se verifica si se proporciona el nombre del mueble en el query de la petici√≥n. Si no se proporciona, se devuelve un c√≥digo de estado 400 junto con un mensaje indicando que el nombre es requerido.
Se utiliza el m√©todo <code>findOneAndDelete</code> de Mongoose para buscar y eliminar el mueble de la base de datos basado en el nombre proporcionado en el query de la petici√≥n. Si se encuentra y se elimina correctamente el mueble, se devuelve un c√≥digo de estado 200 junto con el mueble eliminado. En caso contrario, si el mueble no se encuentra, se devuelve un c√≥digo de estado 404 y un mensaje indicando que el mueble no fue encontrado. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error indicando la causa del problema.</p>
</li>
<li><p><strong>DELETE /furnitures/:id</strong>: Elimina un mueble de la base de datos basado en su ID. Se utiliza el m√©todo <code>findByIdAndDelete</code> de Mongoose para buscar y eliminar el mueble de la base de datos basado en su ID proporcionado en la URL de la petici√≥n. Si se encuentra y se elimina correctamente el mueble, se devuelve un c√≥digo de estado 200 junto con el mueble eliminado. En caso contrario, si el mueble no se encuentra, se devuelve un c√≥digo de estado 404 y un mensaje indicando que el mueble no fue encontrado. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error indicando la causa del problema.</p>
</li>
</ul>
<a id="md:üí≥-transacciones-1" class="tsd-anchor"></a><h4><a href="#md:üí≥-transacciones-1">[üí≥] Transacciones</a></h4><ul>
<li><p><strong>GET /transactions</strong>: Obtiene transacciones filtradas por el ID √∫nico. Se establece un filtro inicial como un objeto vac√≠o. Luego, se eval√∫an las diferentes combinaciones de par√°metros de consulta (<code>nif</code>, <code>cif</code>) para construir el filtro adecuado. Se utiliza el m√©todo <code>find</code> de Mongoose para buscar en la base de datos las transacciones que coincidan con el filtro especificado. Si se encuentran transacciones y la lista no est√° vac√≠a, se devuelve un c√≥digo de estado 200 junto con las transacciones encontradas. En caso contrario, si no se encuentran transacciones que coincidan con el filtro, se devuelve un c√≥digo de estado 404. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>GET /transactions/:id</strong>: Obtiene una transacci√≥n espec√≠fica de la base de datos basada en su ID. Se utiliza el m√©todo <code>findById</code> de Mongoose para buscar la transacci√≥n en la base de datos basada en su ID proporcionado en la URL de la petici√≥n. Si se encuentra la transacci√≥n, se devuelve un c√≥digo de estado 200 junto con la transacci√≥n encontrada. En caso contrario, si la transacci√≥n no se encuentra, se devuelve un c√≥digo de estado 404. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>GET /transactions</strong>: Obtiene transacciones filtradas por tipo de transacci√≥n. Se establece un filtro inicial basado en el par√°metro de consulta <code>transactionType</code>, si est√° presente en la solicitud. Si se proporciona <code>transactionType</code>, se construye el filtro para buscar transacciones con ese tipo de transacci√≥n. Se utiliza el m√©todo <code>find</code> de Mongoose para buscar en la base de datos las transacciones que coincidan con el filtro especificado. Si se encuentran transacciones y la lista no est√° vac√≠a, se devuelve un c√≥digo de estado 200 junto con las transacciones encontradas. En caso contrario, si no se encuentran transacciones que coincidan con el filtro, se devuelve un c√≥digo de estado 404. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>GET /transactions</strong>: Obtiene transacciones filtradas por fecha y hora. Se establece un filtro inicial basado en el par√°metro de consulta <code>dateTime</code>, si est√° presente en la solicitud. Si se proporciona <code>dateTime</code>, se construye el filtro para buscar transacciones con esa fecha y hora. Se utiliza el m√©todo <code>find</code> de Mongoose para buscar en la base de datos las transacciones que coincidan con el filtro especificado. Si se encuentran transacciones y la lista no est√° vac√≠a, se devuelve un c√≥digo de estado 200 junto con las transacciones encontradas. En caso contrario, si no se encuentran transacciones que coincidan con el filtro, se devuelve un c√≥digo de estado 404 junto con un mensaje indicando que no se pudo encontrar ninguna transacci√≥n con la entrada proporcionada. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>POST /transactions</strong>: Crea una nueva transacci√≥n en la base de datos. Se verifica si el participante especificado existe como cliente o proveedor en la base de datos. Si no se encuentra, se devuelve un c√≥digo de estado 404 con un mensaje indicando que el participante no fue encontrado. Luego, se comprueba si el participante es un proveedor o un cliente. Se valida el tipo de transacci√≥n y se realizan las operaciones correspondientes seg√∫n el tipo de transacci√≥n especificado. Se verifica si los muebles requeridos est√°n disponibles y se actualizan los registros de stock y muebles del participante. Se calcula el monto total de la transacci√≥n y se crea un nuevo objeto de transacci√≥n. Finalmente, se guarda la transacci√≥n en la base de datos y se devuelve un c√≥digo de estado 201 junto con la transacci√≥n creada. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>DELETE /transactions/:id</strong>: Elimina una transacci√≥n de la base de datos basada en su ID. Se utiliza el m√©todo <code>findByIdAndDelete</code> de Mongoose para buscar y eliminar la transacci√≥n de la base de datos basada en su ID √∫nico. Se verifican varias condiciones relacionadas con la integridad de los datos antes de eliminar la transacci√≥n. Se comprueba si la transacci√≥n existe y si el participante asociado a√∫n existe como cliente o proveedor. Se realiza una verificaci√≥n adicional seg√∫n el tipo de transacci√≥n para asegurarse de que el participante sea el tipo correcto (cliente o proveedor) y se actualiza el stock de los muebles correspondientes en consecuencia. Finalmente, si la transacci√≥n se elimina correctamente, se devuelve un c√≥digo de estado 200 junto con un mensaje de √©xito y los detalles de la transacci√≥n eliminada. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 y un mensaje de error.</p>
</li>
<li><p><strong>PATCH /transactions/:id</strong>: Actualiza una transacci√≥n espec√≠fica en la base de datos basada en su ID.
Estrategia: Se valida si las actualizaciones proporcionadas son permitidas, es decir, si corresponden a los campos <code>details</code> y <code>furniture</code>. Si alguna de las actualizaciones no est√° permitida, se devuelve un c√≥digo de estado 400 junto con un mensaje indicando que las actualizaciones son inv√°lidas. Luego, se utiliza el m√©todo <code>findOneAndUpdate</code> de Mongoose para buscar y actualizar la transacci√≥n en la base de datos basada en su ID proporcionado en la URL de la petici√≥n. Si se encuentra y se actualiza la transacci√≥n correctamente, se devuelve un c√≥digo de estado 200 junto con la transacci√≥n actualizada. En caso contrario, si la transacci√≥n no se encuentra, se devuelve un c√≥digo de estado 404 junto con un mensaje indicando que la transacci√≥n no existe. Si ocurre alg√∫n error durante el proceso, se devuelve un c√≥digo de estado 500 junto con un mensaje de error.</p>
</li>
</ul>
<a id="md:üß™-pruebas" class="tsd-anchor"></a><h3><a href="#md:üß™-pruebas">[üß™] Pruebas</a></h3><p>Para realizar las pruebas de la API, hemos utilizado la herramienta <code>ThunderClient</code> en una primera instancia, que nos permite realizar peticiones HTTP a nuestra API y comprobar que los resultados obtenidos son los esperados. Tras √©sto, hemos automatizado las pruebas utilizando <code>Supertest</code> que nos permiten realizar pruebas unitarias y de integraci√≥n sobre nuestra API.</p>
<a id="md:üë©-clientes-1" class="tsd-anchor"></a><h4><a href="#md:üë©-clientes-1">[üë©] Clientes</a></h4><p>Las pruebas realizadas para la gesti√≥n de clientes (<code>CUSTOMERS</code>) se centran en verificar el correcto funcionamiento de las rutas y m√©todos asociados a la creaci√≥n, obtenci√≥n, actualizaci√≥n y eliminaci√≥n de clientes en la aplicaci√≥n.</p>
<ol>
<li><p><strong>Pruebas de obtenci√≥n de clientes</strong>:</p>
<ul>
<li>Se realizaron pruebas para confirmar que los clientes pueden obtenerse correctamente de la base de datos utilizando diferentes criterios de b√∫squeda, como el NIF y el ID.</li>
<li>Por ejemplo, se prob√≥ que la ruta <code>GET /customers?nif={nif}</code> devuelve correctamente un cliente seg√∫n su NIF.</li>
</ul>
</li>
<li><p><strong>Pruebas de creaci√≥n de clientes</strong>:</p>
<ul>
<li>Se realizaron pruebas para verificar que la ruta <code>POST /customers</code> crea nuevos clientes en la base de datos correctamente.</li>
<li>Las pruebas cubren casos donde la creaci√≥n es exitosa, as√≠ como casos donde no se proporcionan datos suficientes o se proporcionan datos incorrectos.</li>
</ul>
</li>
<li><p><strong>Pruebas de actualizaci√≥n de clientes</strong>:</p>
<ul>
<li>Se realizaron pruebas para verificar que la ruta <code>PATCH /customers</code> actualice los clientes existentes en la base de datos.</li>
<li>Las pruebas cubren escenarios donde la actualizaci√≥n es exitosa, as√≠ como casos donde se proporcionan datos incorrectos o se intenta actualizar un cliente inexistente.</li>
</ul>
</li>
<li><p><strong>Pruebas de eliminaci√≥n de clientes</strong>:</p>
<ul>
<li>Se realizaron pruebas para verificar que la ruta <code>DELETE /customers</code> elimine correctamente los clientes de la base de datos.</li>
<li>Adem√°s, se probaron casos donde se intenta eliminar un cliente inexistente o se proporciona un ID no v√°lido.</li>
</ul>
</li>
</ol>
<a id="md:üì¶-proveedor-1" class="tsd-anchor"></a><h4><a href="#md:üì¶-proveedor-1">[üì¶] Proveedor</a></h4><p>Las pruebas realizadas para la gesti√≥n de proveedores (<code>PROVIDERS</code>) se enfocan en verificar el correcto funcionamiento de las rutas y m√©todos asociados a la creaci√≥n, obtenci√≥n, actualizaci√≥n y eliminaci√≥n de proveedores en la aplicaci√≥n.</p>
<ol>
<li><p><strong>Pruebas de obtenci√≥n de proveedores</strong>:</p>
<ul>
<li>Se realizaron pruebas para confirmar que los proveedores pueden obtenerse correctamente de la base de datos utilizando diferentes criterios de b√∫squeda, como el CIF y el ID.</li>
<li>Por ejemplo, se prob√≥ que la ruta <code>GET /providers?cif={cif}</code> devuelve correctamente un proveedor seg√∫n su CIF.</li>
</ul>
</li>
<li><p><strong>Pruebas de creaci√≥n de proveedores</strong>:</p>
<ul>
<li>Se realizaron pruebas para verificar que la ruta <code>POST /providers</code> cree nuevos proveedores en la base de datos correctamente.</li>
<li>Las pruebas cubren casos donde la creaci√≥n es exitosa, as√≠ como casos donde no se proporcionan datos suficientes o se proporcionan datos incorrectos.</li>
</ul>
</li>
<li><p><strong>Pruebas de actualizaci√≥n de proveedores</strong>:</p>
<ul>
<li>Se realizaron pruebas para verificar que la ruta <code>PATCH /providers</code> actualice los proveedores existentes en la base de datos.</li>
<li>Las pruebas cubren escenarios donde la actualizaci√≥n es exitosa, as√≠ como casos donde se proporcionan datos incorrectos o se intenta actualizar un proveedor inexistente.</li>
</ul>
</li>
<li><p><strong>Pruebas de eliminaci√≥n de proveedores</strong>:</p>
<ul>
<li>Se realizaron pruebas para verificar que la ruta <code>DELETE /providers</code> elimine correctamente los proveedores de la base de datos.</li>
<li>Adem√°s, se probaron casos donde se intenta eliminar un proveedor inexistente o se proporciona un ID no v√°lido.</li>
</ul>
</li>
</ol>
<a id="md:ü™ë-muebles-1" class="tsd-anchor"></a><h4><a href="#md:ü™ë-muebles-1">[ü™ë] Muebles</a></h4><p>Las pruebas realizadas para la gesti√≥n de muebles (<code>FURNITURES</code>) se enfocan en verificar el correcto funcionamiento de las rutas y m√©todos asociados a la creaci√≥n, obtenci√≥n, actualizaci√≥n y eliminaci√≥n de muebles en la aplicaci√≥n.</p>
<ol>
<li><p><strong>Pruebas de obtenci√≥n de muebles</strong>:</p>
<ul>
<li>Se realizaron varias pruebas para confirmar que los muebles se pueden obtener correctamente de la base de datos utilizando diferentes criterios de b√∫squeda, como el ID, el nombre, la descripci√≥n y el color.</li>
<li>Por ejemplo, se prob√≥ que la ruta <code>GET /furnitures?id={id}</code> devuelve correctamente un mueble seg√∫n su ID.</li>
</ul>
</li>
<li><p><strong>Pruebas de creaci√≥n de muebles</strong>:</p>
<ul>
<li>Se realizaron pruebas para verificar que la ruta <code>POST /furnitures</code> crea nuevos muebles en la base de datos correctamente.</li>
<li>Las pruebas cubren casos donde la creaci√≥n es exitosa, as√≠ como casos donde no se proporcionan datos suficientes o se proporcionan datos incorrectos.</li>
</ul>
</li>
<li><p><strong>Pruebas de actualizaci√≥n de muebles</strong>:</p>
<ul>
<li>Se realizaron pruebas para verificar que la ruta <code>PATCH /furnitures/:id</code> actualice los muebles existentes en la base de datos.</li>
<li>Las pruebas cubren escenarios donde la actualizaci√≥n es exitosa, as√≠ como casos donde se proporcionan datos incorrectos o se intenta actualizar un mueble inexistente.</li>
</ul>
</li>
<li><p><strong>Pruebas de eliminaci√≥n de muebles</strong>:</p>
<ul>
<li>Se realizaron pruebas para verificar que la ruta <code>DELETE /furnitures/:id</code> elimine correctamente los muebles de la base de datos.</li>
<li>Adem√°s, se probaron casos donde se intenta eliminar un mueble inexistente o se proporciona un ID no v√°lido.</li>
</ul>
</li>
</ol>
<a id="md:üí≥-transacciones-2" class="tsd-anchor"></a><h4><a href="#md:üí≥-transacciones-2">[üí≥] Transacciones</a></h4><p>Estas pruebas para la gesti√≥n de transacciones (<code>TRANSACTIONS</code>) en la aplicaci√≥n cubren una amplia gama de casos para garantizar que el sistema funcione correctamente y maneje adecuadamente los posibles errores.</p>
<ol>
<li><p><strong>Pruebas de obtenci√≥n de transacciones</strong>:</p>
<ul>
<li>Se realizaron pruebas para confirmar que las transacciones pueden obtenerse correctamente de la base de datos utilizando diferentes criterios de b√∫squeda, como el ID de transacci√≥n, tipo de transacci√≥n, fecha, NIF y CIF.</li>
<li>Las pruebas incluyen casos donde se espera encontrar transacciones y casos donde no se encuentran.</li>
</ul>
</li>
<li><p><strong>Pruebas de creaci√≥n de transacciones</strong>:</p>
<ul>
<li>Se realizaron pruebas para verificar que las nuevas transacciones se puedan crear correctamente en la base de datos.</li>
<li>Las pruebas cubren escenarios donde las transacciones son exitosas y se crean con la informaci√≥n correcta, as√≠ como casos donde se proporciona informaci√≥n incorrecta o faltante.</li>
</ul>
</li>
<li><p><strong>Pruebas de actualizaci√≥n de transacciones</strong>:</p>
<ul>
<li>Se realizaron pruebas para verificar que las transacciones existentes se puedan actualizar correctamente en la base de datos.</li>
<li>Las pruebas incluyen escenarios donde las actualizaciones son exitosas y casos donde se intentan actualizar transacciones con informaci√≥n incorrecta o inv√°lida.</li>
</ul>
</li>
<li><p><strong>Pruebas de eliminaci√≥n de transacciones</strong>:</p>
<ul>
<li>Se realizaron pruebas para verificar que las transacciones existentes se puedan eliminar correctamente de la base de datos.</li>
<li>Las pruebas cubren escenarios donde las eliminaciones son exitosas y casos donde se intentan eliminar transacciones que no existen o donde hay problemas con los participantes o los muebles involucrados. Tambi√©n se verific√≥ el stock de los muebles despu√©s de eliminar una transacci√≥n.</li>
</ul>
</li>
</ol>
<a id="md:üöÄ-workflows" class="tsd-anchor"></a><h4><a href="#md:üöÄ-workflows">[üöÄ] WORKFLOWS</a></h4><p>Se realizaron pruebas de integraci√≥n para verificar que los diferentes componentes de la aplicaci√≥n funcionen correctamente juntos. Las pruebas cubren casos donde se realizan operaciones CRUD en diferentes rutas y se verifican los resultados esperados.</p>
<ol>
<li><p><strong>Crear una transacci√≥n de venta al cliente:</strong></p>
<ul>
<li>Se crea un cliente y un mueble.</li>
<li>Se env√≠a una solicitud para crear una transacci√≥n de venta al cliente con la informaci√≥n del cliente y del mueble.</li>
<li>Se espera que la transacci√≥n se cree exitosamente.</li>
<li>Se espera que el stock del mueble se actualice correctamente.</li>
<li>Se espera que el monto total de la transacci√≥n sea correcto.</li>
<li>Se verifica que si se intenta crear una transacci√≥n con un stock de 0, se reciba un error adecuado.</li>
</ul>
</li>
<li><p><strong>Crear una transacci√≥n de compra al proveedor:</strong></p>
<ul>
<li>Se intenta crear una transacci√≥n de compra al proveedor.</li>
<li>Se espera que esta transacci√≥n no se cree exitosamente debido a ciertas condiciones, como que el proveedor no tenga el mueble en stock.</li>
<li>Se espera que el stock del mueble se actualice correctamente.</li>
<li>Se espera que el monto total de la transacci√≥n sea correcto.</li>
<li>Se verifica que el proveedor tenga el mueble asociado antes de crear la transacci√≥n.</li>
</ul>
</li>
<li><p><strong>Eliminar una transacci√≥n de venta al cliente:</strong></p>
<ul>
<li>Se crea una transacci√≥n de venta al cliente.</li>
<li>Se intenta eliminar esta transacci√≥n.</li>
<li>Se espera que la transacci√≥n se elimine correctamente.</li>
<li>Se verifica que si el cliente asociado a la transacci√≥n se elimina, se reciba un error adecuado.</li>
<li>Se verifica que si el mueble asociado a la transacci√≥n se elimina, se reciba un error adecuado.</li>
<li>Se verifica que el stock del mueble se actualice correctamente despu√©s de eliminar la transacci√≥n.</li>
</ul>
</li>
<li><p><strong>Eliminar una transacci√≥n de compra al proveedor:</strong></p>
<ul>
<li>Se crea una transacci√≥n de compra al proveedor.</li>
<li>Se intenta eliminar esta transacci√≥n.</li>
<li>Se espera que la transacci√≥n se elimine correctamente.</li>
<li>Se verifica que si el proveedor asociado a la transacci√≥n se elimina, se reciba un error adecuado.</li>
<li>Se verifica que si el mueble asociado a la transacci√≥n se elimina, se reciba un error adecuado.</li>
<li>Se verifica que el stock del mueble se actualice correctamente despu√©s de eliminar la transacci√≥n.</li>
</ul>
</li>
<li><p><strong>Actualizar una transacci√≥n de venta al cliente:</strong></p>
<ul>
<li>Se crea una transacci√≥n de venta al cliente.</li>
<li>Se intenta actualizar esta transacci√≥n.</li>
<li>Se espera que la transacci√≥n se actualice correctamente.</li>
<li>Se verifica que si el cliente asociado a la transacci√≥n se elimina, se reciba un error adecuado.</li>
<li>Se verifica que si el mueble asociado a la transacci√≥n se elimina, se reciba un error adecuado.</li>
</ul>
</li>
<li><p><strong>Actualizar una transacci√≥n de compra al proveedor:</strong></p>
<ul>
<li>Se crea una transacci√≥n de compra al proveedor.</li>
<li>Se intenta actualizar esta transacci√≥n.</li>
<li>Se espera que la transacci√≥n se actualice correctamente.</li>
<li>Se verifica que si el proveedor asociado a la transacci√≥n se elimina, se reciba un error adecuado.</li>
<li>Se verifica que si el mueble asociado a la transacci√≥n se elimina, se reciba un error adecuado.</li>
</ul>
</li>
</ol>
<a id="md:üí≠-conclusiones" class="tsd-anchor"></a><h2><a href="#md:üí≠-conclusiones">[üí≠] Conclusiones</a></h2><p>En esta pr√°ctica hemos aprendido a crear una API REST para la tienda de muebles propuesta (DSIKEA) utilizando Node.js, Express, Mongoose y MongoDB. Hemos definido diferentes rutas para gestionar clientes, proveedores, muebles y transacciones en la aplicaci√≥n adem√°s de los esquemas de datos necesarios para cada uno de estos componentes. Hemos implementado las operaciones CRUD para cada uno de estos componentes y hemos realizado pruebas unitarias y de integraci√≥n para verificar que la API funcione correctamente y maneje adecuadamente los posibles errores.</p>
<p>Adem√°s, hemos aprendido a desplegar aplicaciones en √©ste caso mediante la herramienta Render, adem√°s de aprender a utilizar MongoDB Atlas para almacenar la base de datos en la nube.</p>
<p>Los miembros del grupo consideramos que la pr√°ctica ha sido muy interesante y nos ha permitido aprender mucho sobre el desarrollo de aplicaciones web y APIs REST con Node.js y MongoDB, pudiendo aplicar los conocimientos adquiridos en la asignatura de Desarrollo de Sistemas Inform√°ticos.</p>
<a id="md:üìö-bibliograf√≠a" class="tsd-anchor"></a><h2><a href="#md:üìö-bibliograf√≠a">[üìö] Bibliograf√≠a</a></h2><ul>
<li><a href="https://ull-esit-inf-dsi-2324.github.io/prct13-DSIkea-api/">Enunciado de la pr√°ctica</a></li>
<li><a href="https://ull-esit-inf-dsi-2324.github.io/nodejs-theory/">Apuntes de la asignatura sobre NodeJS</a></li>
<li><a href="https://ull-esit-inf-dsi-2324.github.io/nodejs-theory/nodejs-mongodb.html">Documentaci√≥n para la instalaci√≥n de MongoDB en Ubuntu</a></li>
<li><a href="https://ull-esit-inf-dsi-2324.github.io/nodejs-theory/nodejs-deployment.html">Documentaci√≥n sobre el despliegue con MongoDB Atlas y Render</a></li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:pr√°ctica-13---dsikea-api---group-c"><span>Pr√°ctica 13 -<wbr/> DSIKEA API -<wbr/> GROUP C</span></a><ul><li><a href="#md:üôÇ-integrantes"><span>[üôÇ] <wbr/>Integrantes:</span></a></li><li><a href="#md:üí¨-introducci√≥n"><span>[üí¨] <wbr/>Introducci√≥n</span></a></li><li><a href="#md:‚öôÔ∏è-desarrollo"><span>[‚öôÔ∏è] <wbr/>Desarrollo</span></a></li><li><ul><li><a href="#md:üõ†Ô∏è-herramientas-utilizadas"><span>[üõ†Ô∏è] <wbr/>Herramientas utilizadas</span></a></li><li><ul><li><a href="#md:‚úâÔ∏è-express"><span>[‚úâÔ∏è] <wbr/>Express</span></a></li><li><a href="#md:üìñ-mongodb--mongoose"><span>[üìñ] <wbr/>MongoDB / <wbr/>Mongoose</span></a></li><li><a href="#md:üåç-mongodb-atlas"><span>[üåç] <wbr/>MongoDB <wbr/>Atlas</span></a></li><li><a href="#md:üìÑ-render"><span>[üìÑ] <wbr/>Render</span></a></li></ul></li><li><a href="#md:üß¨-modelos"><span>[üß¨] <wbr/>Modelos</span></a></li><li><ul><li><a href="#md:üë©-cliente"><span>[üë©] <wbr/>Cliente</span></a></li><li><a href="#md:üì¶-proveedor"><span>[üì¶] <wbr/>Proveedor</span></a></li><li><a href="#md:ü™ë-mueble"><span>[ü™ë] <wbr/>Mueble</span></a></li><li><a href="#md:üí≥-transacciones"><span>[üí≥] <wbr/>Transacciones</span></a></li></ul></li><li><a href="#md:üóÉÔ∏è-rutas"><span>[üóÉÔ∏è] <wbr/>Rutas</span></a></li><li><ul><li><a href="#md:üë©-clientes"><span>[üë©] <wbr/>Clientes</span></a></li><li><a href="#md:üì¶-proveedores"><span>[üì¶] <wbr/>Proveedores</span></a></li><li><a href="#md:ü™ë-muebles"><span>[ü™ë] <wbr/>Muebles</span></a></li><li><a href="#md:üí≥-transacciones-1"><span>[üí≥] <wbr/>Transacciones</span></a></li></ul></li><li><a href="#md:üß™-pruebas"><span>[üß™] <wbr/>Pruebas</span></a></li><li><ul><li><a href="#md:üë©-clientes-1"><span>[üë©] <wbr/>Clientes</span></a></li><li><a href="#md:üì¶-proveedor-1"><span>[üì¶] <wbr/>Proveedor</span></a></li><li><a href="#md:ü™ë-muebles-1"><span>[ü™ë] <wbr/>Muebles</span></a></li><li><a href="#md:üí≥-transacciones-2"><span>[üí≥] <wbr/>Transacciones</span></a></li><li><a href="#md:üöÄ-workflows"><span>[üöÄ] WORKFLOWS</span></a></li></ul></li></ul></li><li><a href="#md:üí≠-conclusiones"><span>[üí≠] <wbr/>Conclusiones</span></a></li><li><a href="#md:üìö-bibliograf√≠a"><span>[üìö] <wbr/>Bibliograf√≠a</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>notes-rest-api</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>